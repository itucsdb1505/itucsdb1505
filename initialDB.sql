
DROP TABLE IF EXISTS test;
DROP TABLE IF EXISTS NEWS;
DROP TABLE IF EXISTS USERS;
DROP TABLE IF EXISTS POOL;
DROP TABLE IF EXISTS PLAYERS;
DROP TABLE IF EXISTS COACHES;
DROP TABLE IF EXISTS REFEREES;
DROP TABLE IF EXISTS TEAMS;
DROP TABLE IF EXISTS MATCHES;
DROP TABLE IF EXISTS COMPETITION;
DROP TABLE IF EXISTS STATS;
DROP TABLE IF EXISTS LEAGUES;
DROP TABLE IF EXISTS MESSAGES;
DROP TABLE IF EXISTS COUNTRIES;
DROP DOMAIN IF EXISTS AUTH;

CREATE DOMAIN AUTH VARCHAR(10) CHECK (VALUE IN ('u', 'm', 'a'));

CREATE TABLE test(num int);
CREATE TABLE USERS(ID SERIAL PRIMARY KEY, NAME TEXT, AGE DATE, EMAIL CHAR(50), PASSWORD CHAR(32), AUTH AUTH,  COUNTRY_ID INT);
CREATE TABLE NEWS(ID SERIAL PRIMARY KEY, TITLE CHAR(50), CONTENT TEXT, USER_ID INT);
CREATE TABLE POOL(NAME TEXT, COUNTRY_ID INT, CAPACITY INT, BUILT INT,ID SERIAL PRIMARY KEY);
CREATE TABLE PLAYERS(ID SERIAL PRIMARY KEY, NAME TEXT, SURNAME TEXT, AGE INT, NATION INT, TEAM TEXT, FIELD TEXT, GOAL INT);
CREATE TABLE COACHES(ID SERIAL PRIMARY KEY, NAME TEXT, SURNAME TEXT, NATION INT, TEAM TEXT);
CREATE TABLE STATS(PLAYER_ID INT,LEAGUE_ID INT, GOAL INT, ASSIST INT,SAVE INT,ID SERIAL PRIMARY KEY);
CREATE TABLE REFEREES(ID SERIAL PRIMARY KEY, NAME TEXT, SURNAME TEXT, LEAGUE INT, CITY TEXT);
CREATE TABLE TEAMS(ID SERIAL PRIMARY KEY, NAME VARCHAR(50) NOT NULL, FOUNDATION_YEAR INT NOT NULL, COLOURS VARCHAR(50), LEAGUE INT NOT NULL, COUNTRY INT NOT NULL);
CREATE TABLE MATCHES(ID SERIAL PRIMARY KEY, HOME VARCHAR(50) NOT NULL, AWAY VARCHAR(50) NOT NULL, REFEREE VARCHAR(50), LEAGUE INT NOT NULL);
CREATE TABLE COMPETITION(ID SERIAL PRIMARY KEY, NAME VARCHAR(100) NOT NULL, TYPE VARCHAR(50) NOT NULL);
CREATE TABLE COUNTRIES(ID SERIAL PRIMARY KEY, NAME VARCHAR(50) NOT NULL, POPULATION FLOAT NOT NULL, COORDINATES FLOAT);
CREATE TABLE LEAGUES(ID SERIAL PRIMARY KEY, NAME VARCHAR(100) NOT NULL, NATION INT NOT NULL, CLASSIFICATION INT NOT NULL);
CREATE TABLE MESSAGES(ID SERIAL PRIMARY KEY, TITLE VARCHAR(100) NOT NULL, PHONE BIGINT, MAIL VARCHAR(100), MESSAGE TEXT NOT NULL);


INSERT INTO test values(1);
INSERT INTO test values(2);
INSERT INTO test values(3);
INSERT INTO test values(4);
INSERT INTO test values(5);
INSERT INTO USERS(NAME, AGE, EMAIL, PASSWORD, AUTH, COUNTRY_ID) values('Emre EROĞLU', '1987-6-6', 'emreeroglu@itu.edu.tr', md5('1'), 'a', 1);
INSERT INTO USERS(NAME, AGE, EMAIL, PASSWORD, AUTH, COUNTRY_ID) values('abcd', '1990-1-1', 'abcd@itu.edu.tr', md5('1'), 'u', 2);
INSERT INTO USERS(NAME, AGE, EMAIL, PASSWORD, AUTH, COUNTRY_ID) values('efgh', '1992-1-1', 'efgh@itu.edu.tr', md5('1'), 'm', 3);
INSERT INTO USERS(NAME, AGE, EMAIL, PASSWORD, AUTH, COUNTRY_ID) values('jklm', '1994-1-1', 'jklm@itu.edu.tr', md5('1'), 'a', 3);
INSERT INTO NEWS(TITLE, CONTENT, USER_ID) values('New 1', 'New 1 Content', 1);
INSERT INTO NEWS(TITLE, CONTENT, USER_ID) values('New 2', 'New 2 Content', 3);
INSERT INTO NEWS(TITLE, CONTENT, USER_ID) values('New 3', 'New 3 Content', 3);
INSERT INTO NEWS(TITLE, CONTENT, USER_ID) values('New 4', 'New 4 Content', 4);
INSERT INTO POOL values('Colesium',1, 25000, 1985);
INSERT INTO POOL values('Itu',1, 27500, 2010);
INSERT INTO POOL values('Yanky',2, 19000, 2004);
INSERT INTO POOL values('Surioc',2, 35000, 1995);
INSERT INTO POOL values('Haka',3, 7000, 2001);
INSERT INTO PLAYERS(NAME, SURNAME, AGE, NATION, TEAM, FIELD, GOAL) values('Adam',  'Wright',  38,  2, 'UCLA',         'Attacker',   9);
INSERT INTO PLAYERS(NAME, SURNAME, AGE, NATION, TEAM, FIELD, GOAL) values('Louis', 'Handley', 39,  2, 'California',   'Defence',    3);
INSERT INTO PLAYERS(NAME, SURNAME, AGE, NATION, TEAM, FIELD, GOAL) values('Ryan',  'Bailey',  40,  2, 'Vk Partizan',  'Attacker',   10);
INSERT INTO PLAYERS(NAME, SURNAME, AGE, NATION, TEAM, FIELD, GOAL) values('IHSAN', 'Halici',  55,  3, 'GS',           'BALLPICKER', 11);
INSERT INTO PLAYERS(NAME, SURNAME, AGE, NATION, TEAM, FIELD, GOAL) values('Emre',  'Eroglu',  48,  1, 'BJK',          'FORVET',     9);
INSERT INTO COACHES(NAME, SURNAME, NATION, TEAM) values('Matt',   'Biondi',  2,  'California');
INSERT INTO COACHES(NAME, SURNAME, NATION, TEAM) values('Sinan',  'Turunç',  1,  'TC');
INSERT INTO COACHES(NAME, SURNAME, NATION, TEAM) values('Ihsan',  'Halici',  3,  'ZonguldakSpor');
INSERT INTO COACHES(NAME, SURNAME, NATION, TEAM) values('YILMAZ', 'VURAL',   3,  'KARABUKSPOR');
INSERT INTO STATS values(1,1,30,12,0);
INSERT INTO STATS values(2,1,11,24,0);
INSERT INTO STATS values(3,2,43,15,0);
INSERT INTO STATS values(4,2,12,16,0);
INSERT INTO STATS values(5,3,2,8,6);
INSERT INTO REFEREES(NAME, SURNAME, LEAGUE, CITY) values('Cüneyt', 'Cakır', 1, 'ISTANBUL');
INSERT INTO REFEREES(NAME, SURNAME, LEAGUE, CITY) values('Adem', 'Celebi', 2, 'ISTANBUL');
INSERT INTO COUNTRIES(NAME, POPULATION, COORDINATES) values('Türkiye',30000,1);
INSERT INTO COUNTRIES(NAME, POPULATION, COORDINATES) values('Amerika',70000,3);
INSERT INTO COUNTRIES(NAME, POPULATION, COORDINATES) values('Güney Afrika',80000,5);
INSERT INTO LEAGUES(NAME, NATION, CLASSIFICATION) values('Super',1,1);
INSERT INTO LEAGUES(NAME, NATION, CLASSIFICATION) values('Second',2,2);
INSERT INTO LEAGUES(NAME, NATION, CLASSIFICATION) values('Amateur',3,3);
INSERT INTO MESSAGES(TITLE, PHONE, MAIL, MESSAGE) values('Baslik',05553337766,'emn@gmail.com','selam gençlik');
INSERT INTO MESSAGES(TITLE, MAIL, MESSAGE) values('Baslik','emn@gmail.com','selam gençlik');
INSERT INTO TEAMS(NAME, FOUNDATION_YEAR, COLOURS, LEAGUE, COUNTRY) values('GALATASARAY',1905,'YELLOW-RED',1,1);
INSERT INTO TEAMS(NAME, FOUNDATION_YEAR, COLOURS, LEAGUE, COUNTRY) values('FENERBAHÇE',1907,'YELLOW-NAVY',1,1);
INSERT INTO TEAMS(NAME, FOUNDATION_YEAR, COLOURS, LEAGUE, COUNTRY) values('BEŞİKTAŞ',1903,'BLACK-WHITE',1,1);
INSERT INTO MATCHES(HOME, AWAY, REFEREE, LEAGUE) values('GALATASARAY','FENERBAHÇE','Hakan Fıstıkçı',1);
INSERT INTO MATCHES(HOME, AWAY, REFEREE, LEAGUE) values('FENERBAHÇE','BEŞİKTAŞ','Cihan Duman',1);
INSERT INTO MATCHES(HOME, AWAY, REFEREE, LEAGUE) values('BEŞİKTAŞ','GALATASARAY','Nurullah Topaloğlu',1);
INSERT INTO COMPETITION(NAME, TYPE) values('Champions League','local');
INSERT INTO COMPETITION(NAME, TYPE) values('World Cup','international');

ALTER TABLE NEWS ADD CONSTRAINT FK_NEWS_USERS FOREIGN KEY (USER_ID) REFERENCES USERS (ID);
ALTER TABLE USERS ADD CONSTRAINT FK_USERS_COUNTRIES FOREIGN KEY (COUNTRY_ID) REFERENCES COUNTRIES (ID) ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE PLAYERS ADD CONSTRAINT FK_PLAYERS_COUNTRIES FOREIGN KEY (NATION) REFERENCES COUNTRIES (ID) ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE COACHES ADD CONSTRAINT FK_COACHES_COUNTRIES FOREIGN KEY (NATION) REFERENCES COUNTRIES (ID) ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE LEAGUES ADD CONSTRAINT FK_LEAGUES_COUNTRIES FOREIGN KEY (NATION) REFERENCES COUNTRIES (ID) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE POOL ADD CONSTRAINT FK_POOL_COUNTRIES FOREIGN KEY (COUNTRY_ID) REFERENCES COUNTRIES (ID) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE REFEREES ADD CONSTRAINT FK_REFEREES_LEAGUES FOREIGN KEY (LEAGUE) REFERENCES LEAGUES	  (ID) ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE TEAMS ADD CONSTRAINT FK_TEAMS_COUNTRIES FOREIGN KEY (COUNTRY) REFERENCES COUNTRIES (ID) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE TEAMS ADD CONSTRAINT FK_TEAMS_LEAGUES FOREIGN KEY (LEAGUE) REFERENCES LEAGUES (ID) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE MATCHES ADD CONSTRAINT FK_MATCHES_LEAGUES FOREIGN KEY (LEAGUE) REFERENCES LEAGUES (ID) ON DELETE CASCADE ON UPDATE CASCADE;

